<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Oli · TRS IVT Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .traffic-light { width: 2.75rem; height: 2.75rem; border-radius: 9999px; cursor: pointer; transition: transform .15s ease, box-shadow .15s ease; box-shadow: 0 4px 8px rgba(0,0,0,.09); }
    .traffic-light:hover { transform: scale(1.03); box-shadow: 0 6px 12px rgba(0,0,0,.12); }
    .traffic-selected { outline: 4px solid #3b82f6; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen p-4 md:p-8">
  <main class="mx-auto max-w-5xl bg-white rounded-3xl shadow-2xl p-6 md:p-10">
    <!-- Header with hard-wired logo -->
    <header class="flex flex-col items-center gap-4 mb-6">
      <img src="NLC_Logo_GitHub_Small.png" alt="NLC Logo" class="w-20 h-20 rounded-full object-cover" onerror="this.style.display='none'">
      <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight text-gray-900 text-center">Oli’s TRS · IVT (2×/week)</h1>
      <p class="text-gray-500 text-center">Select felt readiness and session to view today’s plan.</p>
    </header>

    <!-- Controls -->
    <section class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div class="bg-gray-50 border border-gray-200 p-5 rounded-2xl">
        <p class="text-sm font-semibold text-gray-600 mb-3">Felt Readiness</p>
        <div id="readiness" class="flex items-center gap-4">
          <div class="traffic-light bg-green-500 traffic-selected" data-readiness="Green" title="Green"></div>
          <div class="traffic-light bg-yellow-500" data-readiness="Yellow" title="Yellow"></div>
          <div class="traffic-light bg-red-500" data-readiness="Red" title="Red"></div>
        </div>
      </div>
      <div class="bg-gray-50 border border-gray-200 p-5 rounded-2xl">
        <p class="text-sm font-semibold text-gray-600 mb-3">Session</p>
        <div class="flex gap-3">
          <button id="btnA" class="px-6 py-3 rounded-full font-bold text-white bg-blue-600 hover:bg-blue-700 shadow">Session A</button>
          <button id="btnB" class="px-6 py-3 rounded-full font-bold text-gray-800 bg-gray-200 hover:bg-gray-300 shadow">Session B</button>
        </div>
      </div>
    </section>

    <!-- Plan -->
    <section class="bg-gray-50 border border-gray-200 p-6 rounded-2xl mb-8">
      <h2 id="planTitle" class="text-xl md:text-2xl font-bold text-gray-900 mb-4"></h2>
      <div id="planWrap" class="space-y-5"></div>
      <div id="restWrap" class="hidden text-center text-gray-600 py-6">
        <p class="text-lg">Red Day — Prioritise recovery.</p>
        <p class="text-sm text-gray-500 mt-1">Walk nasal, soft tissue, and run the cool-down mobility as <span class="font-semibold">1–2 easy rounds</span>.</p>
      </div>
    </section>

    <!-- Weekly planner -->
    <section class="bg-gray-50 border border-gray-200 p-6 rounded-2xl">
      <h3 class="text-lg md:text-xl font-bold text-gray-900 mb-4">Weekly Planner (2 sessions)</h3>
      <div class="grid grid-cols-2 md:grid-cols-7 gap-3 text-sm">
        <div class="p-3 rounded-xl bg-white border">Mon<br><span class="font-semibold">A</span></div>
        <div class="p-3 rounded-xl bg-white border">Tue<br>Recovery</div>
        <div class="p-3 rounded-xl bg-white border">Wed<br><span class="font-semibold">B</span></div>
        <div class="p-3 rounded-xl bg-white border">Thu<br>Recovery</div>
        <div class="p-3 rounded-xl bg-white border">Fri<br>Optional A (light)</div>
        <div class="p-3 rounded-xl bg-white border">Sat<br>Optional B (light)</div>
        <div class="p-3 rounded-xl bg-white border">Sun<br>Rest</div>
      </div>
    </section>
  </main>

  <script>
    // ---- Data model ----
    const PLAN = [
      // Session A — Main
      {session:"A", planType:"Main", block:"Warm-up", exercise:"Poliquin Steps", volume:"3×10", notes:"Knee-forward pattern; heel on wedge okay"},
      {session:"A", planType:"Main", block:"Warm-up", exercise:"Bird Dogs", volume:"3×10", notes:"Ribs down; pelvis level"},
      {session:"A", planType:"Main", block:"Warm-up", exercise:"Side Plank", volume:"3×10s", notes:"Top hip forward; long spine"},
      {session:"A", planType:"Main", block:"Warm-up", exercise:"Tib Raises", volume:"3×10", notes:"Slow eccentrics"},

      {session:"A", planType:"Main", block:"IVT", exercise:"Press Up", volume:"W1–2: 3×10 → build to 10×10", notes:"Load bumps only after full 10×10"},
      {session:"A", planType:"Main", block:"IVT", exercise:"VMO Squats", volume:"W1–2: 3×10 → build to 10×10", notes:"Bodyweight/light until 10×10"},
      {session:"A", planType:"Main", block:"IVT", exercise:"KB Military Press", volume:"W1–2: 3×10 → build to 10×10", notes:"Strict; no layback"},

      {session:"A", planType:"Main", block:"Cool-down", exercise:"Prying Squat", volume:"2×60s", notes:"Elbows inside knees; nasal breathing"},
      {session:"A", planType:"Main", block:"Cool-down", exercise:"Kneeling Prayer Hold", volume:"2×60s", notes:"Hips back; spine long; breathe low"},

      // Session A — Green Day
      {session:"A", planType:"Green Day", block:"IVT", exercise:"Press Up", volume:"10×10", notes:"Progress load only after 10×10"},
      {session:"A", planType:"Green Day", block:"IVT", exercise:"VMO Squats", volume:"10×10", notes:"Keep heels elevated if needed"},
      {session:"A", planType:"Green Day", block:"IVT", exercise:"KB Military Press", volume:"10×10", notes:"Own the groove"},

      // Session A — Yellow Day
      {session:"A", planType:"Yellow Day", block:"IVT (Reduced)", exercise:"Press Up", volume:"5×5", notes:"Crisp reps; stop shy of grind"},
      {session:"A", planType:"Yellow Day", block:"IVT (Reduced)", exercise:"VMO Squats", volume:"5×5", notes:"Controlled tempo"},
      {session:"A", planType:"Yellow Day", block:"IVT (Reduced)", exercise:"KB Military Press", volume:"5×5", notes:"Light bell; snap not grind"},

      // Session B — Main
      {session:"B", planType:"Main", block:"Warm-up", exercise:"Poliquin Steps", volume:"3×10", notes:"Toe angle comfortable"},
      {session:"B", planType:"Main", block:"Warm-up", exercise:"Bird Dogs", volume:"3×10", notes:"Exhale fully; keep 360 brace"},
      {session:"B", planType:"Main", block:"Warm-up", exercise:"Side Plank", volume:"3×10s", notes:"Stack ribs & pelvis"},
      {session:"B", planType:"Main", block:"Warm-up", exercise:"Tib Raises", volume:"3×10", notes:"Shins tall"},

      {session:"B", planType:"Main", block:"IVT", exercise:"10s Hang", volume:"W1–2: 3×10s → build to 10×10s", notes:"Full grip; shoulders packed"},
      {session:"B", planType:"Main", block:"IVT", exercise:"Bulgarian Split Squats", volume:"W1–2: 3×10 → build to 10×10", notes:"Front knee tracks over toes"},
      {session:"B", planType:"Main", block:"IVT", exercise:"KB Swing", volume:"W1–2: 3×10 → build to 10×10", notes:"Hardstyle; crisp snap"},

      {session:"B", planType:"Main", block:"Cool-down", exercise:"Prying Squat", volume:"2×60s", notes:"Elbows inside knees; nasal breathing"},
      {session:"B", planType:"Main", block:"Cool-down", exercise:"Kneeling Prayer Hold", volume:"2×60s", notes:"Hips back; spine long; breathe low"},

      // Session B — Green Day
      {session:"B", planType:"Green Day", block:"IVT", exercise:"10s Hang", volume:"10×10s", notes:"Add load only after 10×10s"},
      {session:"B", planType:"Green Day", block:"IVT", exercise:"Bulgarian Split Squats", volume:"10×10", notes:"Progress load only after 10×10"},
      {session:"B", planType:"Green Day", block:"IVT", exercise:"KB Swing", volume:"10×10", notes:"Progress load only after 10×10"},

      // Session B — Yellow Day
      {session:"B", planType:"Yellow Day", block:"IVT (Reduced)", exercise:"10s Hang", volume:"5×5s", notes:"No added load"},
      {session:"B", planType:"Yellow Day", block:"IVT (Reduced)", exercise:"Bulgarian Split Squats", volume:"5×5", notes:"Bodyweight/light only"},
      {session:"B", planType:"Yellow Day", block:"IVT (Reduced)", exercise:"KB Swing", volume:"5×5", notes:"Light bell; relaxed snap"},
    ];

    let readiness = "Green";
    let sessionSel = "A";

    function render() {
      const planTitle = document.getElementById("planTitle");
      const planWrap  = document.getElementById("planWrap");
      const restWrap  = document.getElementById("restWrap");
      planWrap.innerHTML = "";

      const planTypes = (readiness === "Green")
        ? ["Main", "Green Day"]
        : (readiness === "Yellow")
          ? ["Main", "Yellow Day"]
          : []; // Red

      planTitle.textContent = `Session ${sessionSel} · ${readiness === "Red" ? "Red Day (Rest)" : readiness}`;

      if (readiness === "Red") {
        restWrap.classList.remove("hidden");
        return;
      } else {
        restWrap.classList.add("hidden");
      }

      const rows = PLAN.filter(p => p.session === sessionSel && planTypes.includes(p.planType));
      const byBlock = rows.reduce((acc, r) => {
        acc[r.block] = acc[r.block] || [];
        acc[r.block].push(r);
        return acc;
      }, {});

      Object.keys(byBlock).forEach(block => {
        const card = document.createElement("div");
        card.className = "bg-white rounded-xl border p-4 shadow-sm";

        const h = document.createElement("h4");
        h.className = "font-semibold text-gray-800 mb-3";
        h.textContent = block;
        card.appendChild(h);

        byBlock[block].forEach(item => {
          const row = document.createElement("div");
          row.className = "flex flex-col md:flex-row md:items-center md:justify-between gap-2 py-2 border-b last:border-b-0";

          const left = document.createElement("div");
          left.innerHTML = `<div class="font-bold text-gray-900">${item.exercise}</div>
                            <div class="text-sm text-gray-500 italic">${item.notes || ""}</div>`;

          const right = document.createElement("div");
          right.innerHTML = `<div class="text-blue-600 font-semibold text-base md:text-lg text-right">${item.volume}</div>`;

          row.appendChild(left);
          row.appendChild(right);
          card.appendChild(row);
        });

        planWrap.appendChild(card);
      });
    }

    // Readiness selector
    document.getElementById("readiness").addEventListener("click", (e) => {
      const bubble = e.target.closest(".traffic-light");
      if (!bubble) return;
      document.querySelectorAll(".traffic-light").forEach(n => n.classList.remove("traffic-selected"));
      bubble.classList.add("traffic-selected");
      readiness = bubble.dataset.readiness;
      render();
    });

    // Session buttons
    const btnA = document.getElementById("btnA");
    const btnB = document.getElementById("btnB");
    btnA.addEventListener("click", () => {
      sessionSel = "A";
      btnA.className = "px-6 py-3 rounded-full font-bold text-white bg-blue-600 hover:bg-blue-700 shadow";
      btnB.className = "px-6 py-3 rounded-full font-bold text-gray-800 bg-gray-200 hover:bg-gray-300 shadow";
      render();
    });
    btnB.addEventListener("click", () => {
      sessionSel = "B";
      btnB.className = "px-6 py-3 rounded-full font-bold text-white bg-blue-600 hover:bg-blue-700 shadow";
      btnA.className = "px-6 py-3 rounded-full font-bold text-gray-800 bg-gray-200 hover:bg-gray-300 shadow";
      render();
    });

    render();
  </script>
</body>
</html>
